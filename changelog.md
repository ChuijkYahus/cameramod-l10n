fixed some stuff with compat classes